<!-- templates/projects/partials/task_table.html -->
{% for task in tasks %}
<tr class="task-row" data-project="{{ task.project.name }}" data-status="{% if task.is_active %}active{% else %}inactive{% endif %}">
    <td class="ps-4">
        <div class="d-flex align-items-center">
            <div class="me-3">
                {% if task.is_active %}
                    <i class="bi bi-check2-square text-success fs-5"></i>
                {% else %}
                    <i class="bi bi-square text-muted fs-5"></i>
                {% endif %}
            </div>
            <div>
                <h6 class="mb-1 fw-semibold">{{ task.name }}</h6>
                <small class="text-muted">Task ID: #{{ task.id }}</small>
            </div>
        </div>
    </td>
    <td>
        <div class="d-flex align-items-center">
            <div class="project-color-indicator me-2" style="background-color: {{ task.project.color }};"></div>
            <div>
                <span class="fw-medium">{{ task.project.name }}</span>
                <br>
                <small class="text-muted">{{ task.project.client.name }}</small>
            </div>
        </div>
    </td>
    <td class="text-center">
        {% if task.estimated_minutes %}
            <span class="badge bg-light text-dark estimated-time">
                {{ task.estimated_minutes }} min
            </span>
        {% else %}
            <span class="text-muted">-</span>
        {% endif %}
    </td>
    <td class="text-center">
        {% if task.is_active %}
            <span class="badge bg-success">
                <i class="bi bi-play-circle me-1"></i>Active
            </span>
        {% else %}
            <span class="badge bg-secondary">
                <i class="bi bi-pause-circle me-1"></i>Inactive
            </span>
        {% endif %}
    </td>
    <td class="text-end pe-4">
        <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-primary btn-sm" title="Edit task">
                <i class="bi bi-pencil"></i>
            </button>
            <button class="btn btn-outline-success btn-sm" title="Start timer for this task">
                <i class="bi bi-play"></i>
            </button>
            <button class="btn btn-outline-secondary btn-sm" title="Toggle status">
                <i class="bi bi-{% if task.is_active %}pause{% else %}play{% endif %}"></i>
            </button>
            <form method="post" action="{% url 'task_delete' task.pk %}" class="d-inline"
                  onsubmit="return confirm('Are you sure you want to delete this task?')">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger btn-sm" title="Delete task">
                    <i class="bi bi-trash"></i>
                </button>
            </form>
        </div>
    </td>
</tr>
{% endfor %}